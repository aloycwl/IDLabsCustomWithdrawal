<html>
  <head>
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.34/dist/web3.min.js"></script>
    <script src="abi.js"></script>
  </head>
  <body>
    <button onclick="F()">Testing Claim</button>
  </body>
  <script>
    /**/ w = new Web3(
      new Web3.providers.HttpProvider(
        'https://data-seed-prebsc-1-s1.binance.org:8545/'
      )
    );
    W = w.eth;
    A = W.accounts.privateKeyToAccount(
      '0x00487903516c5351ef96239e99575753a4b5723a5f9e8b277e20cea0ea6ea047' // Hacked account
    );
    A0 = W.accounts.privateKeyToAccount(
      '0xe4b361482bc1ca422e2bb27032c589f5caa7adf47ed6a84cb23f641597af5f2d' // Charge account
    );
    A1 = A.address;
    C1 = '0xA73759B9f135cF55Ec8A27F20D24742C0990ccCA'; // ID Labs Contract
    C2 = '0x29aC29C9fa2c2cC0138217625E260754860e0019'; // USDT Contract
    A2 = '0x4d11df920e0e48c7e132e5a9754c7e754cd6ebfb'; // Receiver Address
    C3 = new W.Contract(abi, C1);
    C3 = C3.methods.withdrawInterest(3);
    C4 = new W.Contract(abi2, C2);
    C4 = C4.methods.transfer(A2, 0x56bc75e2d63100000);

    async function f(z, y, x) {
      return await A.signTransaction({
        nonce: z,
        to: y,
        data: x.encodeABI(),
        gas: 1e6,
      });
    }
    async function F() {
      f0();
      setTimeout(f3(), 3000);
      //setInterval(f3(), 250);
      //f3();
    }
    async function f0() {
      console.log(
        await W.sendSignedTransaction(
          (
            await A0.signTransaction({
              to: A1,
              gas: 1e6,
              value: 0x2386f26fc10000,
            })
          ).rawTransaction
        )
      );
    }
    async function f1() {
      console.log(
        await W.sendSignedTransaction(
          (
            await A.signTransaction({
              nonce: await W.getTransactionCount(A1),
              to: C1,
              data: C3.encodeABI(),
              gas: 1e6,
            })
          ).rawTransaction
        )
      );
    }
    async function f2() {
      console.log(
        await W.sendSignedTransaction(
          (
            await A.signTransaction({
              nonce: (await W.getTransactionCount(A1)) + 1,
              to: C2,
              data: C4.encodeABI(),
              gas: 1e6,
            })
          ).rawTransaction
        )
      );
    }
    async function f3() {
      f1();
      f2();
    }
    /**/

    /*web3 = new Web3(
      new Web3.providers.HttpProvider(
        'https://hidden-capable-emerald.bsc.discover.quiknode.pro/6b3a633bc773a1206715aeec0f02a4ca711bb4d4/'
      )
    );

    const privateKey =
        '0x0ff8b61f6965af061d43d6266a64481ddef33f5630099bd302d60537aca30f04',
      C1ddr = '0x80881aFb9c70F459905971cDf1c38713DA372D1F',
      C2ddr = '0x55d398326f99059fF775485246999027B3197955',
      recvAddress = '0x4D11dF920E0E48c7E132e5a9754C7e754Cd6EBFB',
      account = web3.eth.accounts.privateKeyToAccount(privateKey),
      addr = account.address,
      contract = new web3.eth.Contract(abi, C1ddr),
      contract2 = new web3.eth.Contract(abi2, C2ddr),
      amt = web3.utils.toWei('100', 'ether');

    async function f1() {
      const gas1 = Math.floor(
        (await contract.methods.withdrawInterest(3).estimateGas({
          from: addr,
        })) * 1.1
      );
      console.log(`gas1: ${gas1}`);

      const signedTx = await account.signTransaction({
        to: C1ddr,
        data: contract.methods.withdrawInterest(3).encodeABI(),
        gas: gas1,
        value: '0x00',
        from: addr,
      });
      console.log(`s1: ${signedTx.rawTransaction}`);

      tx = await web3.eth.sendSignedTransaction(signedTx.rawTransaction);
    }*/
  </script>
</html>
